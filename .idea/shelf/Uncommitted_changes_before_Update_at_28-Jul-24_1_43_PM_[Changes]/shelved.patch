Index: web/header1.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@page isELIgnored=\"false\" %>\r\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\r\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\" %>\r\n<!DOCTYPE html>\r\n<html\r\n        lang=\"en\"\r\n        class=\"light-style layout-menu-fixed layout-compact\"\r\n        dir=\"ltr\"\r\n        data-theme=\"theme-default\"\r\n        data-assets-path=\"assets/\"\r\n        data-template=\"vertical-menu-template-free\">\r\n<head>\r\n    <title>Tables - Basic Tables | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>\r\n    <meta charset=\"utf-8\">\r\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\r\n    <meta content=\"Free HTML Templates\" name=\"keywords\">\r\n    <meta content=\"Free HTML Templates\" name=\"description\">\r\n\r\n    <!-- Favicon -->\r\n    <link rel=\"icon\" type=\"image/x-icon\" href=\"assets/img/favicon/favicon.ico\"/>\r\n    <link rel=\"icon\" type=\"image/x-icon\" href=\"assets/img/favicon/favicon.ico\"/>\r\n\r\n    <!-- Google Web Fonts -->\r\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\r\n    <link href=\"https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap\"\r\n          rel=\"stylesheet\">\r\n\r\n    <!-- Font Awesome -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css\" rel=\"stylesheet\">\r\n\r\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"/>\r\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin/>\r\n    <link\r\n            href=\"https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap\"\r\n            rel=\"stylesheet\"/>\r\n\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/fonts/boxicons.css\"/>\r\n\r\n    <!-- Libraries Stylesheet -->\r\n    <link href=\"lib/owlcarousel/assets/owl.carousel.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- Customized Bootstrap Stylesheet -->\r\n    <link href=\"css/style.css\" rel=\"stylesheet\">\r\n\r\n    <!-- Core CSS -->\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/css/core.css\" class=\"template-customizer-core-css\"/>\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/css/theme-default.css\" class=\"template-customizer-theme-css\"/>\r\n    <link rel=\"stylesheet\" href=\"assets/css/demo.css\"/>\r\n\r\n    <!-- Vendors CSS -->\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css\"/>\r\n\r\n    <!-- Page CSS -->\r\n\r\n    <!-- Helpers -->\r\n    <script src=\"assets/vendor/js/helpers.js\"></script>\r\n    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->\r\n    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->\r\n    <script src=\"assets/js/config.js\"></script>\r\n</head>\r\n\r\n<body>\r\n<!-- Topbar Start -->\r\n<div class=\"container-fluid bg-dark\">\r\n    <div class=\"row py-2 px-lg-5\">\r\n        <div class=\"col-lg-6 text-center text-lg-left mb-2 mb-lg-0\">\r\n            <div class=\"d-inline-flex align-items-center text-white\">\r\n                <small><i class=\"fa fa-phone-alt mr-2\"></i>+012 345 6789</small>\r\n                <small class=\"px-3\">|</small>\r\n                <small><i class=\"fa fa-envelope mr-2\"></i>info@example.com</small>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-lg-6 text-center text-lg-right\">\r\n            <div class=\"d-inline-flex align-items-center\">\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.facebook.com/boyfingerr/\">\r\n                    <i class=\"fab fa-facebook-f\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://twitter.com/boyfinger42\">\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.linkedin.com/\">\r\n                    <i class=\"fab fa-linkedin-in\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.instagram.com/\">\r\n                    <i class=\"fab fa-instagram\"></i>\r\n                </a>\r\n                <a class=\"text-white pl-2\" target=\"_blank\" href=\"https://www.youtube.com/@JOISPOI\">\r\n                    <i class=\"fab fa-youtube\"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- Topbar End -->\r\n\r\n\r\n<!-- Navbar Start -->\r\n<div class=\"container-fluid p-0\">\r\n    <nav class=\"navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5\">\r\n        <a href=\"${pageContext.request.contextPath}/home\" class=\"navbar-brand ml-lg-3\">\r\n            <h1 class=\"m-0 text-uppercase text-primary\"><i class=\"fa fa-book-reader mr-3\"></i>KRS</h1>\r\n        </a>\r\n        <button type=\"button\" class=\"navbar-toggler\" data-toggle=\"collapse\" data-target=\"#navbarCollapse\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div class=\"collapse navbar-collapse justify-content-between px-lg-3\" id=\"navbarCollapse\">\r\n            <div class=\"navbar-nav mx-auto py-0\">\r\n                <a href=\"${pageContext.request.contextPath}/home\"\r\n                   id=\"nav-item-home\" class=\"nav-item nav-link text-dark\">Home</a>\r\n                <a href=\"${pageContext.request.contextPath}/course\"\r\n                   class=\"nav-item nav-link text-dark\" id=\"nav-item-course\">Subjects</a>\r\n                <a href=\"course.jsp\" class=\"nav-item nav-link text-dark\" id=\"nav-item-classes\">Classes</a>\r\n                <a href=\"${pageContext.request.contextPath}/contact\"\r\n                   class=\"nav-item nav-link text-dark\" id=\"nav-item-contact\">Contact</a>\r\n                <a href=\"${pageContext.request.contextPath}/flashcard\"\r\n                   id=\"nav-item-flashcard\" class=\"nav-item nav-link text-dark\">Flashcard</a>\r\n            </div>\r\n        </div>\r\n\r\n        <c:if test=\"${sessionScope.user != null}\">\r\n            <c:set var=\"currentPage\" value=\"${pageContext.request.requestURI}\"></c:set>\r\n            <c:set var=\"avt\" value=\"${sessionScope.user.avatar}\"></c:set>\r\n            <c:if test=\"${currentPage.contains('userdetails.jsp') || currentPage.contains('questiondetails.jsp')\r\n                                  || currentPage.contains('newquestion.jsp') || currentPage.contains('newuser.jsp')}\">\r\n                <c:set var=\"avatar\" value=\"../${avt}\"></c:set>\r\n            </c:if>\r\n            <c:if test=\"${!currentPage.contains('userdetails.jsp') && !currentPage.contains('questiondetails.jsp')\r\n                                  && !currentPage.contains('newquestion.jsp') && !currentPage.contains('newuser.jsp')}\">\r\n                <c:set var=\"avatar\" value=\"${avt}\"></c:set>\r\n            </c:if>\r\n            <div class=\"navbar-nav-right d-flex align-items-center\" id=\"navbar-collapse\">\r\n                <ul class=\"navbar-nav flex-row align-items-center ms-auto\">\r\n                    <!-- Place this tag where you want the button to render. -->\r\n\r\n\r\n                    <!-- User -->\r\n                    <li class=\"nav-item navbar-dropdown dropdown-user dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle hide-arrow\" href=\"javascript:void(0);\"\r\n                           data-bs-toggle=\"dropdown\">\r\n                            <div class=\"avatar avatar-online\">\r\n                                <img src=\"${avatar}\" alt class=\"rounded-circle border border-primary\"\r\n                                     width=\"40\" height=\"40\"/>\r\n                            </div>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"#\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"flex-shrink-0 me-3\">\r\n                                            <div class=\"avatar avatar-online\">\r\n                                                <img src=\"${avatar}\" alt class=\"rounded-circle border border-primary\"\r\n                                                     width=\"40\" height=\"40\"/></div>\r\n                                        </div>\r\n                                        <div class=\"flex-grow-1\">\r\n                                            <span class=\"fw-medium d-block\">${sessionScope.user.name}</span>\r\n                                            <small class=\"text-muted\">${sessionScope.user.r.name}</small>\r\n                                        </div>\r\n                                    </div>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <div class=\"dropdown-divider\"></div>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/profile\">\r\n                                    <i class=\"bx bx-user me-2\"></i>\r\n                                    <span class=\"align-middle\">My Profile</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/dashboard\">\r\n                                    <i class=\"bx bx-bar-chart me-2\"></i>\r\n                                    <span class=\"align-middle\">Dashboard</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <div class=\"dropdown-divider\"></div>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/logout\">\r\n                                    <i class=\"bx bx-power-off me-2\"></i>\r\n                                    <span class=\"align-middle\">Log Out</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <!--/ User -->\r\n                </ul>\r\n            </div>\r\n        </c:if>\r\n        <c:if test=\"${sessionScope.user == null}\">\r\n            <div class=\"navbar-nav-right d-flex align-items-center\" id=\"navbar-collapse\">\r\n                <a href=\"${pageContext.request.contextPath}/login.jsp\"\r\n                   class=\"btn btn-primary py-2 px-4 d-none d-lg-block mr-3\">Login</a>\r\n                <a href=\"${pageContext.request.contextPath}/signup.jsp\"\r\n                   class=\"btn btn-primary py-2 px-4 d-none d-lg-block\">Sign up</a>\r\n            </div>\r\n        </c:if>\r\n\r\n\r\n    </nav>\r\n</div>\r\n<!-- Navbar End -->\r\n\r\n<script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n<script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js\"></script>\r\n<script src=\"lib/easing/easing.min.js\"></script>\r\n<script src=\"lib/waypoints/waypoints.min.js\"></script>\r\n<script src=\"lib/counterup/counterup.min.js\"></script>\r\n<script src=\"lib/owlcarousel/owl.carousel.min.js\"></script>\r\n\r\n<!-- Template Javascript -->\r\n<script src=\"js/main.js\"></script>\r\n\r\n<!-- Core JS -->\r\n<!-- build:js assets/vendor/js/core.js -->\r\n\r\n<script src=\"assets/vendor/libs/jquery/jquery.js\"></script>\r\n<script src=\"assets/vendor/libs/popper/popper.js\"></script>\r\n<script src=\"assets/vendor/js/bootstrap.js\"></script>\r\n<script src=\"assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js\"></script>\r\n<script src=\"assets/vendor/js/menu.js\"></script>\r\n\r\n<!-- endbuild -->\r\n\r\n<!-- Vendors JS -->\r\n\r\n<!-- Main JS -->\r\n<script src=\"assets/js/main.js\"></script>\r\n\r\n<!-- Page JS -->\r\n\r\n<!-- Place this tag in your head or just before your close body tag. -->\r\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\r\n\r\n<script src=\"js/header.js\"></script>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/web/header1.jsp b/web/header1.jsp
--- a/web/header1.jsp	(revision c0e129f6b390ecfe967217ddf23d8288ed8dd0b5)
+++ b/web/header1.jsp	(date 1722149004506)
@@ -17,7 +17,7 @@
     <meta content="Free HTML Templates" name="description">
 
     <!-- Favicon -->
-    <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico"/>
+    <link href="img/favicon.ico" rel="icon">
     <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico"/>
 
     <!-- Google Web Fonts -->
@@ -119,16 +119,11 @@
         </div>
 
         <c:if test="${sessionScope.user != null}">
-            <c:set var="currentPage" value="${pageContext.request.requestURI}"></c:set>
-            <c:set var="avt" value="${sessionScope.user.avatar}"></c:set>
-            <c:if test="${currentPage.contains('userdetails.jsp') || currentPage.contains('questiondetails.jsp')
-                                  || currentPage.contains('newquestion.jsp') || currentPage.contains('newuser.jsp')}">
-                <c:set var="avatar" value="../${avt}"></c:set>
-            </c:if>
-            <c:if test="${!currentPage.contains('userdetails.jsp') && !currentPage.contains('questiondetails.jsp')
-                                  && !currentPage.contains('newquestion.jsp') && !currentPage.contains('newuser.jsp')}">
-                <c:set var="avatar" value="${avt}"></c:set>
-            </c:if>
+            <c:set var="avatar"
+                   value="${pageContext.request.scheme}://${pageContext.request.serverName}:${pageContext.request.serverPort}${pageContext.request.contextPath}/${sessionScope.user.avatar}">
+
+            </c:set>
+
             <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                 <ul class="navbar-nav flex-row align-items-center ms-auto">
                     <!-- Place this tag where you want the button to render. -->
@@ -168,12 +163,14 @@
                                     <span class="align-middle">My Profile</span>
                                 </a>
                             </li>
-                            <li>
-                                <a class="dropdown-item" href="${pageContext.request.contextPath}/dashboard">
-                                    <i class="bx bx-bar-chart me-2"></i>
-                                    <span class="align-middle">Dashboard</span>
-                                </a>
-                            </li>
+                            <c:if test="${sessionScope.user.role < 2}">
+                                <li>
+                                    <a class="dropdown-item" href="${pageContext.request.contextPath}/dashboard">
+                                        <i class="bx bx-bar-chart me-2"></i>
+                                        <span class="align-middle">Dashboard</span>
+                                    </a>
+                                </li>
+                            </c:if>
                             <li>
                                 <div class="dropdown-divider"></div>
                             </li>
@@ -233,7 +230,5 @@
 
 <!-- Place this tag in your head or just before your close body tag. -->
 <script async defer src="https://buttons.github.io/buttons.js"></script>
-
-<script src="js/header.js"></script>
 </body>
 </html>
Index: web/WEB-INF/common/header.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@page isELIgnored=\"false\" %>\r\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\r\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\" %>\r\n<!DOCTYPE html>\r\n<html\r\n        lang=\"en\"\r\n        class=\"light-style layout-menu-fixed layout-compact\"\r\n        dir=\"ltr\"\r\n        data-theme=\"theme-default\"\r\n        data-assets-path=\"assets/\"\r\n        data-template=\"vertical-menu-template-free\">\r\n<head>\r\n    <title>Tables - Basic Tables | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>\r\n    <meta charset=\"utf-8\">\r\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\r\n    <meta content=\"Free HTML Templates\" name=\"keywords\">\r\n    <meta content=\"Free HTML Templates\" name=\"description\">\r\n\r\n    <!-- Favicon -->\r\n    <link rel=\"icon\" type=\"image/x-icon\" href=\"assets/img/favicon/favicon.ico\"/>\r\n    <link rel=\"icon\" type=\"image/x-icon\" href=\"assets/img/favicon/favicon.ico\"/>\r\n\r\n    <!-- Google Web Fonts -->\r\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\">\r\n    <link href=\"https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap\"\r\n          rel=\"stylesheet\">\r\n\r\n    <!-- Font Awesome -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css\" rel=\"stylesheet\">\r\n\r\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"/>\r\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin/>\r\n    <link\r\n            href=\"https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap\"\r\n            rel=\"stylesheet\"/>\r\n\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/fonts/boxicons.css\"/>\r\n\r\n    <!-- Libraries Stylesheet -->\r\n    <link href=\"lib/owlcarousel/assets/owl.carousel.min.css\" rel=\"stylesheet\">\r\n\r\n    <!-- Customized Bootstrap Stylesheet -->\r\n    <link href=\"css/style.css\" rel=\"stylesheet\">\r\n\r\n    <!-- Core CSS -->\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/css/core.css\" class=\"template-customizer-core-css\"/>\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/css/theme-default.css\" class=\"template-customizer-theme-css\"/>\r\n    <link rel=\"stylesheet\" href=\"assets/css/demo.css\"/>\r\n\r\n    <!-- Vendors CSS -->\r\n    <link rel=\"stylesheet\" href=\"assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css\"/>\r\n\r\n    <!-- Page CSS -->\r\n\r\n    <!-- Helpers -->\r\n    <script src=\"assets/vendor/js/helpers.js\"></script>\r\n    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->\r\n    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->\r\n    <script src=\"assets/js/config.js\"></script>\r\n</head>\r\n\r\n<body>\r\n<!-- Topbar Start -->\r\n<div class=\"container-fluid bg-dark\">\r\n    <div class=\"row py-2 px-lg-5\">\r\n        <div class=\"col-lg-6 text-center text-lg-left mb-2 mb-lg-0\">\r\n            <div class=\"d-inline-flex align-items-center text-white\">\r\n                <small><i class=\"fa fa-phone-alt mr-2\"></i>+012 345 6789</small>\r\n                <small class=\"px-3\">|</small>\r\n                <small><i class=\"fa fa-envelope mr-2\"></i>info@example.com</small>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-lg-6 text-center text-lg-right\">\r\n            <div class=\"d-inline-flex align-items-center\">\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.facebook.com/boyfingerr/\">\r\n                    <i class=\"fab fa-facebook-f\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://twitter.com/boyfinger42\">\r\n                    <i class=\"fab fa-twitter\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.linkedin.com/\">\r\n                    <i class=\"fab fa-linkedin-in\"></i>\r\n                </a>\r\n                <a class=\"text-white px-2\" target=\"_blank\" href=\"https://www.instagram.com/\">\r\n                    <i class=\"fab fa-instagram\"></i>\r\n                </a>\r\n                <a class=\"text-white pl-2\" target=\"_blank\" href=\"https://www.youtube.com/@JOISPOI\">\r\n                    <i class=\"fab fa-youtube\"></i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<!-- Topbar End -->\r\n\r\n\r\n<!-- Navbar Start -->\r\n<div class=\"container-fluid p-0\">\r\n    <nav class=\"navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5\">\r\n        <a href=\"${pageContext.request.contextPath}/home\" class=\"navbar-brand ml-lg-3\">\r\n            <h1 class=\"m-0 text-uppercase text-primary\"><i class=\"fa fa-book-reader mr-3\"></i>KRS</h1>\r\n        </a>\r\n        <button type=\"button\" class=\"navbar-toggler\" data-toggle=\"collapse\" data-target=\"#navbarCollapse\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div class=\"collapse navbar-collapse justify-content-between px-lg-3\" id=\"navbarCollapse\">\r\n            <div class=\"navbar-nav mx-auto py-0\">\r\n                <a href=\"${pageContext.request.contextPath}/home\"\r\n                   id=\"nav-item-home\" class=\"nav-item nav-link text-dark\">Home</a>\r\n                <a href=\"${pageContext.request.contextPath}/course\"\r\n                   class=\"nav-item nav-link text-dark\" id=\"nav-item-course\">Subjects</a>\r\n                <a href=\"course.jsp\" class=\"nav-item nav-link text-dark\" id=\"nav-item-classes\">Classes</a>\r\n                <a href=\"${pageContext.request.contextPath}/contact\"\r\n                   class=\"nav-item nav-link text-dark\" id=\"nav-item-contact\">Contact</a>\r\n                <a href=\"${pageContext.request.contextPath}/flashcard\"\r\n                   id=\"nav-item-flashcard\" class=\"nav-item nav-link text-dark\">Flashcard</a>\r\n            </div>\r\n        </div>\r\n\r\n        <c:if test=\"${sessionScope.user != null}\">\r\n            <c:set var=\"currentPage\" value=\"${pageContext.request.requestURI}\"></c:set>\r\n            <c:set var=\"avt\" value=\"${sessionScope.user.avatar}\"></c:set>\r\n            <c:if test=\"${currentPage.contains('userdetails.jsp') || currentPage.contains('questiondetails.jsp')\r\n                                  || currentPage.contains('newquestion.jsp') || currentPage.contains('newuser.jsp')}\">\r\n                <c:set var=\"avatar\" value=\"../${avt}\"></c:set>\r\n            </c:if>\r\n            <c:if test=\"${!currentPage.contains('userdetails.jsp') && !currentPage.contains('questiondetails.jsp')\r\n                                  && !currentPage.contains('newquestion.jsp') && !currentPage.contains('newuser.jsp')}\">\r\n                <c:set var=\"avatar\" value=\"${avt}\"></c:set>\r\n            </c:if>\r\n            <div class=\"navbar-nav-right d-flex align-items-center\" id=\"navbar-collapse\">\r\n                <ul class=\"navbar-nav flex-row align-items-center ms-auto\">\r\n                    <!-- Place this tag where you want the button to render. -->\r\n\r\n\r\n                    <!-- User -->\r\n                    <li class=\"nav-item navbar-dropdown dropdown-user dropdown\">\r\n                        <a class=\"nav-link dropdown-toggle hide-arrow\" href=\"javascript:void(0);\"\r\n                           data-bs-toggle=\"dropdown\">\r\n                            <div class=\"avatar avatar-online\">\r\n                                <img src=\"${avatar}\" alt class=\"rounded-circle border border-primary\"\r\n                                     width=\"40\" height=\"40\"/>\r\n                            </div>\r\n                        </a>\r\n                        <ul class=\"dropdown-menu dropdown-menu-end\">\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"#\">\r\n                                    <div class=\"d-flex\">\r\n                                        <div class=\"flex-shrink-0 me-3\">\r\n                                            <div class=\"avatar avatar-online\">\r\n                                                <img src=\"${avatar}\" alt class=\"rounded-circle border border-primary\"\r\n                                                     width=\"40\" height=\"40\"/></div>\r\n                                        </div>\r\n                                        <div class=\"flex-grow-1\">\r\n                                            <span class=\"fw-medium d-block\">${sessionScope.user.name}</span>\r\n                                            <small class=\"text-muted\">${sessionScope.user.r.name}</small>\r\n                                        </div>\r\n                                    </div>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <div class=\"dropdown-divider\"></div>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/profile\">\r\n                                    <i class=\"bx bx-user me-2\"></i>\r\n                                    <span class=\"align-middle\">My Profile</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/dashboard\">\r\n                                    <i class=\"bx bx-bar-chart me-2\"></i>\r\n                                    <span class=\"align-middle\">Dashboard</span>\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <div class=\"dropdown-divider\"></div>\r\n                            </li>\r\n                            <li>\r\n                                <a class=\"dropdown-item\" href=\"${pageContext.request.contextPath}/logout\">\r\n                                    <i class=\"bx bx-power-off me-2\"></i>\r\n                                    <span class=\"align-middle\">Log Out</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                    <!--/ User -->\r\n                </ul>\r\n            </div>\r\n        </c:if>\r\n        <c:if test=\"${sessionScope.user == null}\">\r\n            <div class=\"navbar-nav-right d-flex align-items-center\" id=\"navbar-collapse\">\r\n                <a href=\"${pageContext.request.contextPath}/login.jsp\"\r\n                   class=\"btn btn-primary py-2 px-4 d-none d-lg-block mr-3\">Login</a>\r\n                <a href=\"${pageContext.request.contextPath}/signup.jsp\"\r\n                   class=\"btn btn-primary py-2 px-4 d-none d-lg-block\">Sign up</a>\r\n            </div>\r\n        </c:if>\r\n\r\n\r\n    </nav>\r\n</div>\r\n<!-- Navbar End -->\r\n\r\n<script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>\r\n<script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js\"></script>\r\n<script src=\"lib/easing/easing.min.js\"></script>\r\n<script src=\"lib/waypoints/waypoints.min.js\"></script>\r\n<script src=\"lib/counterup/counterup.min.js\"></script>\r\n<script src=\"lib/owlcarousel/owl.carousel.min.js\"></script>\r\n\r\n<!-- Template Javascript -->\r\n<script src=\"js/main.js\"></script>\r\n\r\n<!-- Core JS -->\r\n<!-- build:js assets/vendor/js/core.js -->\r\n\r\n<script src=\"assets/vendor/libs/jquery/jquery.js\"></script>\r\n<script src=\"assets/vendor/libs/popper/popper.js\"></script>\r\n<script src=\"assets/vendor/js/bootstrap.js\"></script>\r\n<script src=\"assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js\"></script>\r\n<script src=\"assets/vendor/js/menu.js\"></script>\r\n\r\n<!-- endbuild -->\r\n\r\n<!-- Vendors JS -->\r\n\r\n<!-- Main JS -->\r\n<script src=\"assets/js/main.js\"></script>\r\n\r\n<!-- Page JS -->\r\n\r\n<!-- Place this tag in your head or just before your close body tag. -->\r\n<script async defer src=\"https://buttons.github.io/buttons.js\"></script>\r\n\r\n<script src=\"js/header.js\"></script>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/web/WEB-INF/common/header.jsp b/web/WEB-INF/common/header.jsp
--- a/web/WEB-INF/common/header.jsp	(revision c0e129f6b390ecfe967217ddf23d8288ed8dd0b5)
+++ b/web/WEB-INF/common/header.jsp	(date 1722149019611)
@@ -17,7 +17,7 @@
     <meta content="Free HTML Templates" name="description">
 
     <!-- Favicon -->
-    <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico"/>
+    <link href="img/favicon.ico" rel="icon">
     <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.ico"/>
 
     <!-- Google Web Fonts -->
@@ -119,16 +119,11 @@
         </div>
 
         <c:if test="${sessionScope.user != null}">
-            <c:set var="currentPage" value="${pageContext.request.requestURI}"></c:set>
-            <c:set var="avt" value="${sessionScope.user.avatar}"></c:set>
-            <c:if test="${currentPage.contains('userdetails.jsp') || currentPage.contains('questiondetails.jsp')
-                                  || currentPage.contains('newquestion.jsp') || currentPage.contains('newuser.jsp')}">
-                <c:set var="avatar" value="../${avt}"></c:set>
-            </c:if>
-            <c:if test="${!currentPage.contains('userdetails.jsp') && !currentPage.contains('questiondetails.jsp')
-                                  && !currentPage.contains('newquestion.jsp') && !currentPage.contains('newuser.jsp')}">
-                <c:set var="avatar" value="${avt}"></c:set>
-            </c:if>
+            <c:set var="avatar"
+                   value="${pageContext.request.scheme}://${pageContext.request.serverName}:${pageContext.request.serverPort}${pageContext.request.contextPath}/${sessionScope.user.avatar}">
+
+            </c:set>
+
             <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                 <ul class="navbar-nav flex-row align-items-center ms-auto">
                     <!-- Place this tag where you want the button to render. -->
@@ -139,8 +134,7 @@
                         <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);"
                            data-bs-toggle="dropdown">
                             <div class="avatar avatar-online">
-                                <img src="${avatar}" alt class="rounded-circle border border-primary"
-                                     width="40" height="40"/>
+                                <img src="${avatar}" alt class="w-px-40 h-auto rounded-circle"/>
                             </div>
                         </a>
                         <ul class="dropdown-menu dropdown-menu-end">
@@ -149,8 +143,8 @@
                                     <div class="d-flex">
                                         <div class="flex-shrink-0 me-3">
                                             <div class="avatar avatar-online">
-                                                <img src="${avatar}" alt class="rounded-circle border border-primary"
-                                                     width="40" height="40"/></div>
+                                                <img src="${avatar}" alt class="w-px-40 h-auto rounded-circle"/>
+                                            </div>
                                         </div>
                                         <div class="flex-grow-1">
                                             <span class="fw-medium d-block">${sessionScope.user.name}</span>
@@ -168,12 +162,14 @@
                                     <span class="align-middle">My Profile</span>
                                 </a>
                             </li>
-                            <li>
-                                <a class="dropdown-item" href="${pageContext.request.contextPath}/dashboard">
-                                    <i class="bx bx-bar-chart me-2"></i>
-                                    <span class="align-middle">Dashboard</span>
-                                </a>
-                            </li>
+                            <c:if test="${sessionScope.user.role < 2}">
+                                <li>
+                                    <a class="dropdown-item" href="${pageContext.request.contextPath}/dashboard">
+                                        <i class="bx bx-bar-chart me-2"></i>
+                                        <span class="align-middle">Dashboard</span>
+                                    </a>
+                                </li>
+                            </c:if>
                             <li>
                                 <div class="dropdown-divider"></div>
                             </li>
@@ -233,7 +229,5 @@
 
 <!-- Place this tag in your head or just before your close body tag. -->
 <script async defer src="https://buttons.github.io/buttons.js"></script>
-
-<script src="js/header.js"></script>
 </body>
 </html>
Index: nbproject/private/private.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><<<<<<< HEAD\r\ndeploy.ant.properties.file=C:\\\\Users\\\\janec\\\\AppData\\\\Roaming\\\\NetBeans\\\\17\\\\tomcat101.properties\r\nj2ee.server.home=C:/Program Files/Apache Software Foundation/Tomcat 10.1\r\nj2ee.server.instance=tomcat101:home=C:\\\\Program Files\\\\Apache Software Foundation\\\\Tomcat 10.1\r\njavac.debug=true\r\njavadoc.preview=true\r\nselected.browser=SL[/Browsers/MicrosoftEdgeBrowser\r\nuser.properties.file=C:\\\\Users\\\\PC\\\\AppData\\\\Roaming\\\\NetBeans\\\\17\\\\build.properties\r\n=======\r\ndeploy.ant.properties.file=C:\\\\Users\\\\PC\\\\AppData\\\\Roaming\\\\NetBeans\\\\17\\\\tomcat101.properties\r\nj2ee.server.home=C:/Program Files/Apache Software Foundation/Tomcat 10.1\r\nj2ee.server.instance=tomcat101:home=C:\\\\Program Files\\\\Apache Software Foundation\\\\Tomcat 10.1\r\n>>>>>>> 3e5956e5bfb70681caef0e0eb378d018bb808990\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/nbproject/private/private.properties b/nbproject/private/private.properties
--- a/nbproject/private/private.properties	(revision c0e129f6b390ecfe967217ddf23d8288ed8dd0b5)
+++ b/nbproject/private/private.properties	(date 1722149004504)
@@ -5,9 +5,9 @@
 javac.debug=true
 javadoc.preview=true
 selected.browser=SL[/Browsers/MicrosoftEdgeBrowser
-user.properties.file=C:\\Users\\PC\\AppData\\Roaming\\NetBeans\\17\\build.properties
+user.properties.file=C:\\Users\\DELL\\AppData\\Roaming\\NetBeans\\17\\build.properties
 =======
-deploy.ant.properties.file=C:\\Users\\PC\\AppData\\Roaming\\NetBeans\\17\\tomcat101.properties
+deploy.ant.properties.file=C:\\Users\\DELL\\AppData\\Roaming\\NetBeans\\17\\tomcat101.properties
 j2ee.server.home=C:/Program Files/Apache Software Foundation/Tomcat 10.1
 j2ee.server.instance=tomcat101:home=C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1
 >>>>>>> 3e5956e5bfb70681caef0e0eb378d018bb808990
Index: nbproject/project.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>annotation.processing.enabled=true\r\nannotation.processing.enabled.in.editor=true\r\nannotation.processing.processors.list=\r\nannotation.processing.run.all.processors=true\r\nannotation.processing.source.output=${build.generated.sources.dir}/ap-source-output\r\nbuild.classes.dir=${build.web.dir}/WEB-INF/classes\r\nbuild.classes.excludes=**/*.java,**/*.form\r\nbuild.dir=build\r\nbuild.generated.dir=${build.dir}/generated\r\nbuild.generated.sources.dir=${build.dir}/generated-sources\r\nbuild.test.classes.dir=${build.dir}/test/classes\r\nbuild.test.results.dir=${build.dir}/test/results\r\nbuild.web.dir=${build.dir}/web\r\nbuild.web.excludes=${build.classes.excludes}\r\nclient.urlPart=\r\ncompile.jsps=false\r\nconf.dir=${source.root}/conf\r\ndebug.classpath=${build.classes.dir}:${javac.classpath}\r\ndebug.test.classpath=\\\r\n    ${run.test.classpath}\r\ndisplay.browser=true\r\n# Files to be excluded from distribution war\r\ndist.archive.excludes=\r\ndist.dir=dist\r\ndist.ear.war=${dist.dir}/${war.ear.name}\r\ndist.javadoc.dir=${dist.dir}/javadoc\r\ndist.war=${dist.dir}/${war.name}\r\nendorsed.classpath=\r\nexcludes=\r\nfile.reference.activation-1.1.1.jar=lib\\\\activation-1.1.1.jar\r\nfile.reference.commons-codec-1.15.jar=lib\\\\xls\\\\commons-codec-1.15.jar\r\nfile.reference.commons-collections4-4.4.jar=lib\\\\xls\\\\commons-collections4-4.4.jar\r\nfile.reference.commons-compress-1.21.jar=lib\\\\xls\\\\commons-compress-1.21.jar\r\nfile.reference.commons-io-2.11.0.jar=lib\\\\xls\\\\commons-io-2.11.0.jar\r\nfile.reference.commons-logging-1.2.jar=lib/commons-logging-1.2.jar\r\nfile.reference.commons-logging-1.2.jar-1=lib\\\\xls\\\\commons-logging-1.2.jar\r\nfile.reference.commons-math3-3.6.1.jar=lib\\\\xls\\\\commons-math3-3.6.1.jar\r\nfile.reference.curvesapi-1.07.jar=lib\\\\xls\\\\curvesapi-1.07.jar\r\nfile.reference.fluent-hc-4.5.5.jar=lib/fluent-hc-4.5.5.jar\r\nfile.reference.gson-2.8.2.jar=lib/gson-2.8.2.jar\r\nfile.reference.httpclient-4.5.5.jar=lib/httpclient-4.5.5.jar\r\nfile.reference.httpcore-4.4.9.jar=lib/httpcore-4.4.9.jar\r\nfile.reference.jakarta.activation-2.0.1.jar=lib\\\\xls\\\\jakarta.activation-2.0.1.jar\r\nfile.reference.jakarta.xml.bind-api-3.0.1.jar=lib\\\\xls\\\\jakarta.xml.bind-api-3.0.1.jar\r\nfile.reference.javax.activation-1.2.0.jar=lib//javax.activation-1.2.0.jar\r\nfile.reference.javax.mail.jar=lib/javax.mail.jar\r\nfile.reference.log4j-api-2.18.0.jar=lib\\\\xls\\\\log4j-api-2.18.0.jar\r\nfile.reference.mysql-connector-j-8.4.0.jar=lib/mysql-connector-j-8.4.0.jar\r\nfile.reference.jakarta.servlet.jsp.jstl-2.0.0.jar=lib/jakarta.servlet.jsp.jstl-2.0.0.jar\r\nfile.reference.jakarta.servlet.jsp.jstl-api-2.0.0.jar=lib/jakarta.servlet.jsp.jstl-api-2.0.0.jar\r\nfile.reference.json-20240303.jar=lib/json-20240303.jar\r\nfile.reference.mysql-connector-j-8.4.0.jar=lib/mysql-connector-j-8.4.0.jar\r\nfile.reference.poi-5.2.3.jar=lib\\\\xls\\\\poi-5.2.3.jar\r\nfile.reference.poi-examples-5.2.3.jar=lib\\\\xls\\\\poi-examples-5.2.3.jar\r\nfile.reference.poi-excelant-5.2.3.jar=lib\\\\xls\\\\poi-excelant-5.2.3.jar\r\nfile.reference.poi-javadoc-5.2.3.jar=lib\\\\xls\\\\poi-javadoc-5.2.3.jar\r\nfile.reference.poi-ooxml-5.2.3.jar=lib\\\\xls\\\\poi-ooxml-5.2.3.jar\r\nfile.reference.poi-ooxml-full-5.2.3.jar=lib\\\\xls\\\\poi-ooxml-full-5.2.3.jar\r\nfile.reference.poi-ooxml-lite-5.2.3.jar=lib\\\\xls\\\\poi-ooxml-lite-5.2.3.jar\r\nfile.reference.poi-scratchpad-5.2.3.jar=lib\\\\xls\\\\poi-scratchpad-5.2.3.jar\r\nfile.reference.restfb-2.3.0.jar=lib/restfb-2.3.0.jar\r\nfile.reference.slf4j-api-1.7.36.jar=lib\\\\xls\\\\slf4j-api-1.7.36.jar\r\nfile.reference.SparseBitSet-1.2.jar=lib\\\\xls\\\\SparseBitSet-1.2.jar\r\nfile.reference.xmlbeans-5.1.1.jar=lib\\\\xls\\\\xmlbeans-5.1.1.jar\r\nincludes=**\r\nj2ee.compile.on.save=true\r\nj2ee.copy.static.files.on.save=true\r\nj2ee.deploy.on.save=true\r\nj2ee.platform=10-web\r\nj2ee.platform.classpath=${j2ee.server.home}/bin/tomcat-juli.jar:${j2ee.server.home}/lib/annotations-api.jar:${j2ee.server.home}/lib/catalina-ant.jar:${j2ee.server.home}/lib/catalina-ha.jar:${j2ee.server.home}/lib/catalina-ssi.jar:${j2ee.server.home}/lib/catalina-storeconfig.jar:${j2ee.server.home}/lib/catalina-tribes.jar:${j2ee.server.home}/lib/catalina.jar:${j2ee.server.home}/lib/ecj-4.27.jar:${j2ee.server.home}/lib/el-api.jar:${j2ee.server.home}/lib/jakartaee-migration-1.0.8-shaded.jar:${j2ee.server.home}/lib/jasper-el.jar:${j2ee.server.home}/lib/jasper.jar:${j2ee.server.home}/lib/jaspic-api.jar:${j2ee.server.home}/lib/jsp-api.jar:${j2ee.server.home}/lib/servlet-api.jar:${j2ee.server.home}/lib/tomcat-api.jar:${j2ee.server.home}/lib/tomcat-coyote.jar:${j2ee.server.home}/lib/tomcat-dbcp.jar:${j2ee.server.home}/lib/tomcat-i18n-cs.jar:${j2ee.server.home}/lib/tomcat-i18n-de.jar:${j2ee.server.home}/lib/tomcat-i18n-es.jar:${j2ee.server.home}/lib/tomcat-i18n-fr.jar:${j2ee.server.home}/lib/tomcat-i18n-ja.jar:${j2ee.server.home}/lib/tomcat-i18n-ko.jar:${j2ee.server.home}/lib/tomcat-i18n-pt-BR.jar:${j2ee.server.home}/lib/tomcat-i18n-ru.jar:${j2ee.server.home}/lib/tomcat-i18n-zh-CN.jar:${j2ee.server.home}/lib/tomcat-jdbc.jar:${j2ee.server.home}/lib/tomcat-jni.jar:${j2ee.server.home}/lib/tomcat-util-scan.jar:${j2ee.server.home}/lib/tomcat-util.jar:${j2ee.server.home}/lib/tomcat-websocket.jar:${j2ee.server.home}/lib/websocket-api.jar:${j2ee.server.home}/lib/websocket-client-api.jar\r\nj2ee.server.type=Tomcat\r\njar.compress=false\r\njavac.classpath=\\\r\n    ${file.reference.commons-logging-1.2.jar}:\\\r\n    ${file.reference.fluent-hc-4.5.5.jar}:\\\r\n    ${file.reference.gson-2.8.2.jar}:\\\r\n    ${file.reference.httpclient-4.5.5.jar}:\\\r\n    ${file.reference.httpcore-4.4.9.jar}:\\\r\n    ${file.reference.mysql-connector-j-8.4.0.jar}:\\\r\n    ${file.reference.jakarta.servlet.jsp.jstl-2.0.0.jar}:\\\r\n    ${file.reference.jakarta.servlet.jsp.jstl-api-2.0.0.jar}:\\\r\n    ${file.reference.json-20240303.jar}:\\\r\n    ${file.reference.restfb-2.3.0.jar}:\\\r\n    ${file.reference.javax.mail.jar}:\\\r\n    ${file.reference.activation-1.1.1.jar}:\\\r\n    ${file.reference.javax.activation-1.2.0.jar}:\\\r\n    ${file.reference.SparseBitSet-1.2.jar}:\\\r\n    ${file.reference.commons-codec-1.15.jar}:\\\r\n    ${file.reference.commons-collections4-4.4.jar}:\\\r\n    ${file.reference.commons-compress-1.21.jar}:\\\r\n    ${file.reference.commons-io-2.11.0.jar}:\\\r\n    ${file.reference.commons-logging-1.2.jar-1}:\\\r\n    ${file.reference.commons-math3-3.6.1.jar}:\\\r\n    ${file.reference.curvesapi-1.07.jar}:\\\r\n    ${file.reference.jakarta.activation-2.0.1.jar}:\\\r\n    ${file.reference.jakarta.xml.bind-api-3.0.1.jar}:\\\r\n    ${file.reference.log4j-api-2.18.0.jar}:\\\r\n    ${file.reference.poi-5.2.3.jar}:\\\r\n    ${file.reference.poi-examples-5.2.3.jar}:\\\r\n    ${file.reference.poi-excelant-5.2.3.jar}:\\\r\n    ${file.reference.poi-javadoc-5.2.3.jar}:\\\r\n    ${file.reference.poi-ooxml-5.2.3.jar}:\\\r\n    ${file.reference.poi-ooxml-full-5.2.3.jar}:\\\r\n    ${file.reference.poi-ooxml-lite-5.2.3.jar}:\\\r\n    ${file.reference.poi-scratchpad-5.2.3.jar}:\\\r\n    ${file.reference.slf4j-api-1.7.36.jar}:\\\r\n    ${file.reference.xmlbeans-5.1.1.jar}\r\n    ${file.reference.mysql-connector-j-8.4.0.jar}:\\\r\n    ${file.reference.json-20240303.jar}:\\\r\n    ${file.reference.restfb-2.3.0.jar}:\\\r\n    ${file.reference.jakarta.servlet.jsp.jstl-2.0.0.jar}:\\\r\n    ${file.reference.jakarta.servlet.jsp.jstl-api-2.0.0.jar}\r\n# Space-separated list of extra javac options\r\njavac.compilerargs=\r\njavac.debug=true\r\njavac.deprecation=false\r\njavac.processorpath=\\\r\n    ${javac.classpath}\r\njavac.source=17\r\njavac.target=17\r\njavac.test.classpath=\\\r\n    ${javac.classpath}:\\\r\n    ${build.classes.dir}\r\njavac.test.processorpath=\\\r\n    ${javac.test.classpath}\r\njavadoc.additionalparam=\r\njavadoc.author=false\r\njavadoc.encoding=${source.encoding}\r\njavadoc.noindex=false\r\njavadoc.nonavbar=false\r\njavadoc.notree=false\r\njavadoc.preview=true\r\njavadoc.private=false\r\njavadoc.splitindex=true\r\njavadoc.use=true\r\njavadoc.version=false\r\njavadoc.windowtitle=\r\nlib.dir=${web.docbase.dir}/WEB-INF/lib\r\npersistence.xml.dir=${conf.dir}\r\nplatform.active=default_platform\r\nresource.dir=setup\r\nrun.test.classpath=\\\r\n    ${javac.test.classpath}:\\\r\n    ${build.test.classes.dir}\r\n# Space-separated list of JVM arguments used when running a class with a main method or a unit test\r\n# (you may also define separate properties like run-sys-prop.name=value instead of -Dname=value):\r\nrunmain.jvmargs=\r\nsource.encoding=UTF-8\r\nsource.root=src\r\nsrc.dir=${source.root}/java\r\ntest.src.dir=test\r\nwar.content.additional=\r\nwar.ear.name=${war.name}\r\nwar.name=se1808-g6.war\r\nweb.docbase.dir=web\r\nwebinf.dir=web/WEB-INF\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/nbproject/project.properties b/nbproject/project.properties
--- a/nbproject/project.properties	(revision c0e129f6b390ecfe967217ddf23d8288ed8dd0b5)
+++ b/nbproject/project.properties	(date 1722149004506)
@@ -67,7 +67,7 @@
 j2ee.copy.static.files.on.save=true
 j2ee.deploy.on.save=true
 j2ee.platform=10-web
-j2ee.platform.classpath=${j2ee.server.home}/bin/tomcat-juli.jar:${j2ee.server.home}/lib/annotations-api.jar:${j2ee.server.home}/lib/catalina-ant.jar:${j2ee.server.home}/lib/catalina-ha.jar:${j2ee.server.home}/lib/catalina-ssi.jar:${j2ee.server.home}/lib/catalina-storeconfig.jar:${j2ee.server.home}/lib/catalina-tribes.jar:${j2ee.server.home}/lib/catalina.jar:${j2ee.server.home}/lib/ecj-4.27.jar:${j2ee.server.home}/lib/el-api.jar:${j2ee.server.home}/lib/jakartaee-migration-1.0.8-shaded.jar:${j2ee.server.home}/lib/jasper-el.jar:${j2ee.server.home}/lib/jasper.jar:${j2ee.server.home}/lib/jaspic-api.jar:${j2ee.server.home}/lib/jsp-api.jar:${j2ee.server.home}/lib/servlet-api.jar:${j2ee.server.home}/lib/tomcat-api.jar:${j2ee.server.home}/lib/tomcat-coyote.jar:${j2ee.server.home}/lib/tomcat-dbcp.jar:${j2ee.server.home}/lib/tomcat-i18n-cs.jar:${j2ee.server.home}/lib/tomcat-i18n-de.jar:${j2ee.server.home}/lib/tomcat-i18n-es.jar:${j2ee.server.home}/lib/tomcat-i18n-fr.jar:${j2ee.server.home}/lib/tomcat-i18n-ja.jar:${j2ee.server.home}/lib/tomcat-i18n-ko.jar:${j2ee.server.home}/lib/tomcat-i18n-pt-BR.jar:${j2ee.server.home}/lib/tomcat-i18n-ru.jar:${j2ee.server.home}/lib/tomcat-i18n-zh-CN.jar:${j2ee.server.home}/lib/tomcat-jdbc.jar:${j2ee.server.home}/lib/tomcat-jni.jar:${j2ee.server.home}/lib/tomcat-util-scan.jar:${j2ee.server.home}/lib/tomcat-util.jar:${j2ee.server.home}/lib/tomcat-websocket.jar:${j2ee.server.home}/lib/websocket-api.jar:${j2ee.server.home}/lib/websocket-client-api.jar
+j2ee.platform.classpath=${j2ee.server.home}/bin/tomcat-juli.jar:${j2ee.server.home}/lib/annotations-api.jar:${j2ee.server.home}/lib/catalina-ant.jar:${j2ee.server.home}/lib/catalina-ha.jar:${j2ee.server.home}/lib/catalina-ssi.jar:${j2ee.server.home}/lib/catalina-storeconfig.jar:${j2ee.server.home}/lib/catalina-tribes.jar:${j2ee.server.home}/lib/catalina.jar:${j2ee.server.home}/lib/ecj-4.27.jar:${j2ee.server.home}/lib/el-api.jar:${j2ee.server.home}/lib/jakartaee-migration-1.0.7-shaded.jar:${j2ee.server.home}/lib/jasper-el.jar:${j2ee.server.home}/lib/jasper.jar:${j2ee.server.home}/lib/jaspic-api.jar:${j2ee.server.home}/lib/jsp-api.jar:${j2ee.server.home}/lib/servlet-api.jar:${j2ee.server.home}/lib/tomcat-api.jar:${j2ee.server.home}/lib/tomcat-coyote.jar:${j2ee.server.home}/lib/tomcat-dbcp.jar:${j2ee.server.home}/lib/tomcat-i18n-cs.jar:${j2ee.server.home}/lib/tomcat-i18n-de.jar:${j2ee.server.home}/lib/tomcat-i18n-es.jar:${j2ee.server.home}/lib/tomcat-i18n-fr.jar:${j2ee.server.home}/lib/tomcat-i18n-ja.jar:${j2ee.server.home}/lib/tomcat-i18n-ko.jar:${j2ee.server.home}/lib/tomcat-i18n-pt-BR.jar:${j2ee.server.home}/lib/tomcat-i18n-ru.jar:${j2ee.server.home}/lib/tomcat-i18n-zh-CN.jar:${j2ee.server.home}/lib/tomcat-jdbc.jar:${j2ee.server.home}/lib/tomcat-jni.jar:${j2ee.server.home}/lib/tomcat-util-scan.jar:${j2ee.server.home}/lib/tomcat-util.jar:${j2ee.server.home}/lib/tomcat-websocket.jar:${j2ee.server.home}/lib/websocket-api.jar:${j2ee.server.home}/lib/websocket-client-api.jar
 j2ee.server.type=Tomcat
 jar.compress=false
 javac.classpath=\
Index: src/java/controller/login/LoginServlet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package controller.login;\r\n\r\nimport dal.UserDAO;\r\nimport model.User;\r\n\r\nimport java.io.IOException;\r\nimport java.sql.SQLException;\r\n\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.annotation.WebServlet;\r\nimport jakarta.servlet.http.HttpServlet;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport jakarta.servlet.http.HttpSession;\r\nimport mail.GenerateVerifyCode;\r\nimport mail.SendMail;\r\n\r\n@WebServlet(name = \"LoginServlet\", urlPatterns = {\"/login\"})\r\npublic class LoginServlet extends HttpServlet {\r\n\r\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        User u = (User) session.getAttribute(\"user\");\r\n        if (u != null) {\r\n            response.sendRedirect(\"home\");\r\n        } else {\r\n            String email = request.getParameter(\"email\");\r\n            String password = request.getParameter(\"password\");\r\n            UserDAO userDAO = new UserDAO();\r\n            try {\r\n                User user = userDAO.login(email, password);\r\n                if (user != null || user.getEmail() == null) {\r\n                    switch (user.getStatus()) {\r\n                        case 2:\r\n                            request.setAttribute(\"user\", user);\r\n                            request.getRequestDispatcher(\"/WEB-INF/account/setnewpassword.jsp\").forward(request, response);\r\n                            break;\r\n                        case 0:\r\n                            String receiver = user.getEmail();\r\n                            String subject = \"Your activation code\";\r\n                            String activationCode = GenerateVerifyCode.GenerateCode();\r\n                            String content = \"Your activation code is: \" + activationCode;\r\n                            SendMail.sendMail(receiver, subject, content);\r\n\r\n                            request.setAttribute(\"activationCode\", activationCode);\r\n                            request.setAttribute(\"user\", user);\r\n                            request.getRequestDispatcher(\"/WEB-INF/account/enteractivationcode.jsp\").forward(request, response);\r\n                            break;\r\n                        default:\r\n                            session.setAttribute(\"user\", user);\r\n                            switch (user.getRole()) {\r\n                                case 0:\r\n                                case 1:\r\n                                    response.sendRedirect(\"dashboard\");\r\n                                    break;\r\n                                default:\r\n                                    response.sendRedirect(\"home\");\r\n                            }\r\n                            break;\r\n                    }\r\n                } else {\r\n                    session.setAttribute(\"message\", \"Invalid email or password\");\r\n                    response.sendRedirect(\"login.jsp\");\r\n                }\r\n            } catch (SQLException e) {\r\n                throw new ServletException(\"Login failed\", e);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        processRequest(request, response);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException {\r\n        processRequest(request, response);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/java/controller/login/LoginServlet.java b/src/java/controller/login/LoginServlet.java
--- a/src/java/controller/login/LoginServlet.java	(revision c0e129f6b390ecfe967217ddf23d8288ed8dd0b5)
+++ b/src/java/controller/login/LoginServlet.java	(date 1722149004506)
@@ -30,7 +30,7 @@
             UserDAO userDAO = new UserDAO();
             try {
                 User user = userDAO.login(email, password);
-                if (user != null || user.getEmail() == null) {
+                if (user != null && user.getEmail() != null) {
                     switch (user.getStatus()) {
                         case 2:
                             request.setAttribute("user", user);
